{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "unitycloudADF"
		},
		"ao5gccustdataingest adls_accountKey": {
			"type": "secureString",
			"metadata": "Secure string for 'accountKey' of 'ao5gccustdataingest adls'"
		},
		"AzureBlobStorage_stunitycloud_Identity_properties_typeProperties_serviceEndpoint": {
			"type": "string",
			"defaultValue": "https://stunitycloud.blob.core.windows.net"
		},
		"AzureDataExplorer_adxunitycloud_properties_typeProperties_endpoint": {
			"type": "string",
			"defaultValue": "https://unitycloudadx.eastus.kusto.windows.net"
		},
		"AzureDataExplorer_adxunitycloud_properties_typeProperties_database": {
			"type": "string",
			"defaultValue": "mobilitycore"
		},
		"AzureKeyVault1_properties_typeProperties_baseUrl": {
			"type": "string",
			"defaultValue": "https://unitycloudkeyvault.vault.azure.net/"
		},
		"AzureKeyVault_kv_unityclouddiag_properties_typeProperties_baseUrl": {
			"type": "string",
			"defaultValue": "https://unitycloudkeyvault.vault.azure.net/"
		},
		"ao5gccustdataingest adls_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://ao5gccustdataingest.dfs.core.windows.net/"
		},
		"AzureBlobStorage_stunitycloud_SAS_properties_typeProperties_sasUri_secretName": {
			"type": "string",
			"defaultValue": "BlobstunitycloudSas"
		},
		"Snowflake_UnityCloudFFA_MobilityCore_properties_typeProperties_connectionString_secretName": {
			"type": "string",
			"defaultValue": "SnowflakeMobilityCoreSysAdminConnectionString"
		},
		"Snowflake_UnityCloudFFA_MobilityCoreLocal_properties_typeProperties_connectionString_secretName": {
			"type": "string",
			"defaultValue": "SnowflakeMobilityCoreLocalSysAdminConnectionString"
		},
		"linkedService1_properties_typeProperties_sasUri_secretName": {
			"type": "string",
			"defaultValue": "StagingBlobSas"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/AzureBlobStorage_stunitycloud_Identity')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"serviceEndpoint": "[parameters('AzureBlobStorage_stunitycloud_Identity_properties_typeProperties_serviceEndpoint')]",
					"accountKind": "BlockBlobStorage"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureDataExplorer_adxunitycloud')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureDataExplorer",
				"typeProperties": {
					"endpoint": "[parameters('AzureDataExplorer_adxunitycloud_properties_typeProperties_endpoint')]",
					"database": "[parameters('AzureDataExplorer_adxunitycloud_properties_typeProperties_database')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureKeyVault1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureKeyVault",
				"typeProperties": {
					"baseUrl": "[parameters('AzureKeyVault1_properties_typeProperties_baseUrl')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureKeyVault_kv_unityclouddiag')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureKeyVault",
				"typeProperties": {
					"baseUrl": "[parameters('AzureKeyVault_kv_unityclouddiag_properties_typeProperties_baseUrl')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/ao5gccustdataingest adls')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobFS",
				"typeProperties": {
					"url": "[parameters('ao5gccustdataingest adls_properties_typeProperties_url')]",
					"accountKey": {
						"type": "SecureString",
						"value": "[parameters('ao5gccustdataingest adls_accountKey')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SinkADXMobilityCore_SMF_FEDERATE_PROD')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureDataExplorer_adxunitycloud",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureDataExplorerTable",
				"schema": [
					{
						"name": "SF_LOAD_TS_EST",
						"type": "datetime"
					},
					{
						"name": "RECORD_CONTENT",
						"type": "string"
					}
				],
				"typeProperties": {
					"table": "IEBUS_MOB_PM_CORE_METRICS_5G_NORTHRIM_STAGE_SMF_FEDERATE_PROD"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureDataExplorer_adxunitycloud')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/SinkADXMobilityCore_UPF_FEDERATE_PROD')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureDataExplorer_adxunitycloud",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureDataExplorerTable",
				"schema": [
					{
						"name": "SF_LOAD_TS_EST",
						"type": "datetime"
					},
					{
						"name": "TIME",
						"type": "datetime"
					},
					{
						"name": "FED_UNIQUE_NAME",
						"type": "string"
					},
					{
						"name": "APPNAME",
						"type": "string"
					},
					{
						"name": "DNN",
						"type": "string"
					},
					{
						"name": "SNSSAI",
						"type": "string"
					},
					{
						"name": "CAUSECODE",
						"type": "string"
					},
					{
						"name": "POD",
						"type": "string"
					},
					{
						"name": "PEERID",
						"type": "string"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_CREATE_SERVICE_ATTEMPTS",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_CREATE_SERVICE_SUCCESS",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_CREATE_SERVICE_FAILURES",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_UPDATE_SERVICE_ATTEMPTS",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_UPDATE_SERVICE_SUCCESS",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_UPDATE_SERVICE_FAILURES",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_DELETE_SERVICE_ATTEMPTS",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_DELETE_SERVICE_SUCCESS",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_DELETE_SERVICE_FAILURES",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_UPDATE_NOTIFY_ATTEMPTS",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_UPDATE_NOTIFY_SUCCESS",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_UPDATE_NOTIFY_FAILURES",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_TERMINATE_NOTIFY_ATTEMPTS",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_TERMINATE_NOTIFY_SUCCESS",
						"type": "long"
					},
					{
						"name": "SMFCC_NSMF_SMPOLICY_CONTROL_TERMINATE_NOTIFY_FAILURES",
						"type": "long"
					},
					{
						"name": "RECEIVED_FILE_NAME",
						"type": "string"
					},
					{
						"name": "FILE_ROW_NUMBER",
						"type": "long"
					}
				],
				"typeProperties": {
					"table": "IEBUS_MOB_PM_CORE_METRICS_5G_NORTHRIM_STAGE_UPF_FEDERATE_PROD"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureDataExplorer_adxunitycloud')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Sink_Events_ADLS_JSON')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "ao5gccustdataingest adls",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileSystem": "a05gccustdataingest-events-bronze"
					}
				},
				"schema": {}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/ao5gccustdataingest adls')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Sink_LOGS_FLUENTD_ANY_RAW')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureDataExplorer_adxunitycloud",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"TABLENAME": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "AzureDataExplorerTable",
				"schema": [],
				"typeProperties": {
					"table": {
						"value": "@dataset().TABLENAME",
						"type": "Expression"
					}
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureDataExplorer_adxunitycloud')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Sink_SMF_Events_ADLS_JSON')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "ao5gccustdataingest adls",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"folderPath": "SMF",
						"fileSystem": "ao5gccustdataingest-events-bronze"
					}
				},
				"schema": {}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/ao5gccustdataingest adls')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Sink_SMF_Metrics_ADLS_JSON')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "ao5gccustdataingest adls",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"folderPath": "SMF",
						"fileSystem": "a05gccustdataingest-metrics-bronze"
					}
				},
				"schema": {}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/ao5gccustdataingest adls')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Sink_UPF_Events_ADLS_JSON')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "ao5gccustdataingest adls",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"folderPath": "UPF",
						"fileSystem": "ao5gccustdataingest-events-bronze"
					}
				},
				"schema": {}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/ao5gccustdataingest adls')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Sink_UPF_Metrics_ADLS_JSON')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "ao5gccustdataingest adls",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"folderPath": "UPF",
						"fileSystem": "a05gccustdataingest-metrics-bronze"
					}
				},
				"schema": {}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/ao5gccustdataingest adls')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureBlobStorage_stunitycloud_SAS')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"sasUri": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "AzureKeyVault_kv_unityclouddiag",
							"type": "LinkedServiceReference"
						},
						"secretName": "[parameters('AzureBlobStorage_stunitycloud_SAS_properties_typeProperties_sasUri_secretName')]"
					}
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureKeyVault_kv_unityclouddiag')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Snowflake_UnityCloudFFA_MobilityCore')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Snowflake",
				"typeProperties": {
					"authenticationType": "Basic",
					"connectionString": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "AzureKeyVault_kv_unityclouddiag",
							"type": "LinkedServiceReference"
						},
						"secretName": "[parameters('Snowflake_UnityCloudFFA_MobilityCore_properties_typeProperties_connectionString_secretName')]"
					}
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureKeyVault_kv_unityclouddiag')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Snowflake_UnityCloudFFA_MobilityCoreLocal')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Snowflake",
				"typeProperties": {
					"authenticationType": "Basic",
					"connectionString": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "AzureKeyVault1",
							"type": "LinkedServiceReference"
						},
						"secretName": "[parameters('Snowflake_UnityCloudFFA_MobilityCoreLocal_properties_typeProperties_connectionString_secretName')]"
					}
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureKeyVault1')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/linkedService1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"sasUri": {
						"type": "AzureKeyVaultSecret",
						"store": {
							"referenceName": "AzureKeyVault1",
							"type": "LinkedServiceReference"
						},
						"secretName": "[parameters('linkedService1_properties_typeProperties_sasUri_secretName')]"
					}
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureKeyVault1')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/SrcSnowflakeMCC_EDR_FLOW')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "Snowflake_UnityCloudFFA_MobilityCoreLocal",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "SnowflakeTable",
				"schema": [
					{
						"name": "SF_LOAD_TS_EST",
						"precision": 29,
						"scale": 9
					},
					{
						"name": "RECORD_CONTENT",
						"precision": 0,
						"scale": 0
					},
					{
						"name": "RECORD_METADATA",
						"precision": 0,
						"scale": 0
					},
					{
						"name": "METADATA$ACTION",
						"precision": 6,
						"scale": 0
					},
					{
						"name": "METADATA$ISUPDATE",
						"precision": 1,
						"scale": 0
					},
					{
						"name": "METADATA$ROW_ID",
						"precision": 40,
						"scale": 0
					}
				],
				"typeProperties": {
					"schema": "MSLOGS",
					"table": "STREAM_MCC_EDR_FLOW_UP"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/Snowflake_UnityCloudFFA_MobilityCoreLocal')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/SrcSnowflakeMCC_EDR_SESSION')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "Snowflake_UnityCloudFFA_MobilityCoreLocal",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "SnowflakeTable",
				"schema": [
					{
						"name": "SF_LOAD_TS_EST",
						"precision": 29,
						"scale": 9
					},
					{
						"name": "RECORD_CONTENT",
						"precision": 0,
						"scale": 0
					},
					{
						"name": "RECORD_METADATA",
						"precision": 0,
						"scale": 0
					},
					{
						"name": "METADATA$ACTION",
						"precision": 6,
						"scale": 0
					},
					{
						"name": "METADATA$ISUPDATE",
						"precision": 1,
						"scale": 0
					},
					{
						"name": "METADATA$ROW_ID",
						"precision": 40,
						"scale": 0
					}
				],
				"typeProperties": {
					"schema": "MSLOGS",
					"table": "STREAM_MCC_EDR_SESSION_UP"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/Snowflake_UnityCloudFFA_MobilityCoreLocal')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/SrcSnowflakeMobilityCoreSMF_PROD')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "Snowflake_UnityCloudFFA_MobilityCoreLocal",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "SnowflakeTable",
				"schema": [
					{
						"name": "SF_LOAD_TS_EST",
						"precision": 29,
						"scale": 9
					},
					{
						"name": "RECORD_CONTENT",
						"precision": 0,
						"scale": 0
					},
					{
						"name": "RECORD_METADATA",
						"precision": 0,
						"scale": 0
					},
					{
						"name": "METADATA$ACTION",
						"precision": 6,
						"scale": 0
					},
					{
						"name": "METADATA$ISUPDATE",
						"precision": 1,
						"scale": 0
					},
					{
						"name": "METADATA$ROW_ID",
						"precision": 40,
						"scale": 0
					}
				],
				"typeProperties": {
					"schema": "MSLOGS",
					"table": "STREAM_SMF_PROD"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/Snowflake_UnityCloudFFA_MobilityCoreLocal')]"
			]
		}
	]
}